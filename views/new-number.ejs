<%- include('includes/header', { title: "Settings", loggedIn: true }); %>
<%- include('includes/alert', { message: locals.message}); %>
<div class="card">
  <div class="card-body">
    <h4>Get a new number</h4>
    <hr />

    <form class="mb-4" method="GET" action="/new-number">
      <label for="areaCode" class="mr-3">Search by area code</label>
      <div class="input-group" style="max-width: 250px;">
        <input
          type="text"
          class="form-control"
          id="areaCode"
          name="areaCode"
          placeholder="Enter area code"
        />
        <div class="input-group-append">
          <button class="btn btn-outline-secondary" type="submit">
            Search
          </button>
        </div>
      </div>
    </form>

    <% if (locals.availableNumbers.length > 0) { %>
    <label class="mr-3">Select a number</label>
    <div class="list-group">
      <% for (const number of locals.availableNumbers) { %>
      <button
        class="list-group-item list-group-item-action"
        data-number="<%= number.msisdn %>"
      >
        <%= number.formatted %>
      </button>
      <% } %>
    </div>
    <% } %>
    <% if (locals.message && locals.message.areaCodeWarning) { %>
      <div class="alert alert-warning" role="alert">
        <%- locals.message.areaCodeWarning %>
      </div>
    <% } %>

    <form autocomplete="off" method="POST" action="/new-number" class="mt-3">
      <input type="hidden" id="selectedNumber" name="selectedNumber" />
      <button
        type="submit"
        id="submitButton"
        class="btn btn-primary disabled"
        disabled
      >
        Get Number
      </button>
    </form>
  </div>
</div>
<%- include('includes/footer'); %>
